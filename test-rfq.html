<!DOCTYPE html>
<html>
<head>
    <title>RFQ API Test</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .log { background: #f5f5f5; padding: 10px; margin: 10px 0; border-radius: 5px; }
        .error { background: #fee; border-left: 4px solid #f00; }
        .success { background: #efe; border-left: 4px solid #0f0; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>RFQ API Test</h1>
    
    <div>
        <button onclick="testCreate()">Test: RFQ Oluştur</button>
        <button onclick="testList()">Test: RFQ Listele</button>
        <button onclick="clearLogs()">Temizle</button>
    </div>

    <div id="logs"></div>

    <script>
        function log(message, type = 'log') {
            const div = document.createElement('div');
            div.className = `log ${type}`;
            div.innerHTML = '<strong>' + new Date().toLocaleTimeString() + '</strong><br>' + message;
            document.getElementById('logs').prepend(div);
        }

        function clearLogs() {
            document.getElementById('logs').innerHTML = '';
        }

        async function testCreate() {
            log('RFQ oluşturma testi başlatılıyor...');
            
            const testData = {
                shipownerUid: 'TEST_UID_123', // Gerçek UID'nizi buraya yazın
                title: 'Test RFQ - ' + new Date().toLocaleString(),
                description: 'Bu bir test RFQ\'sudur',
                category: 'spare-parts',
                vessel: {
                    name: 'M/V Test Ship',
                    type: 'Container Ship',
                    imo: '1234567'
                },
                deadline: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString()
            };

            try {
                log('Gönderilen data: <pre>' + JSON.stringify(testData, null, 2) + '</pre>');
                
                const response = await fetch('http://localhost:3000/api/rfq/create', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(testData)
                });

                const data = await response.json();

                if (response.ok) {
                    log('✅ BAŞARILI!<br>Response: <pre>' + JSON.stringify(data, null, 2) + '</pre>', 'success');
                } else {
                    log('❌ HATA!<br>Status: ' + response.status + '<br>Response: <pre>' + JSON.stringify(data, null, 2) + '</pre>', 'error');
                }
            } catch (error) {
                log('❌ NETWORK HATASI!<br>' + error.message, 'error');
            }
        }

        async function testList() {
            log('RFQ listeleme testi başlatılıyor...');
            
            const uid = 'TEST_UID_123'; // Gerçek UID'nizi buraya yazın
            
            try {
                const response = await fetch(`http://localhost:3000/api/rfq/list?uid=${uid}&role=shipowner`);
                const data = await response.json();

                if (response.ok) {
                    log('✅ BAŞARILI!<br>Bulunan RFQ sayısı: ' + data.count + '<br>Response: <pre>' + JSON.stringify(data, null, 2) + '</pre>', 'success');
                } else {
                    log('❌ HATA!<br>Status: ' + response.status + '<br>Response: <pre>' + JSON.stringify(data, null, 2) + '</pre>', 'error');
                }
            } catch (error) {
                log('❌ NETWORK HATASI!<br>' + error.message, 'error');
            }
        }

        log('Test sayfası hazır. Önce gerçek UID\'nizi script\'e yazın, sonra butonlara tıklayın.');
    </script>
</body>
</html>

